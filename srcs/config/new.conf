; This conf is different from nginx confs, but it respects every points of
; the subject of the assignement.
;
; NOTICE:
;  - The first server for a host:port will be the default for this host:port.
;  - Just remember that for chunked request, your server need to unchunked it and the CGI will expect EOF as end of the body.
;  - Same things for the output of the CGI. if no content_length is returned from the CGI, EOF will mean the end of the returned data.
;  - The cgi should be run in the correct directory for relative path file access.

server {
	listen 5000 default;
	server_name localhost;

	error_page 404 /tmp/pages/error_page/404.html;
	error_page 501 /tmp/pages/error_page/501.html;

	client_max_body_size 100;

	location /kapouet {
		
		methods {
			GET HEAD POST PUT DELETE CONNECT OPTIONS TRACE PATCH;
		}
		
		root /tmp/www/;				from where the file should be search
		
		autoindex on;				directory listing
		
		index index.html;			default file
		
		cgi .php {
			path /tmp/cgi;			PATH_INFO
		}

		upload {
			path /tmp/uploads/;
		}
	}
}